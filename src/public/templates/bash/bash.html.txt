<span title="LineNr "class="LineNr first-LineNr">1</span>  <span title="shComment "class="shComment">#!/bin/bash
</span><span title="LineNr "class="LineNr">2</span>  <span title="shSet "class="shSet">set</span><span title="shSetList "class="shSetList"> </span><span title="shSetOption "class="shSetOption">-xe
</span><span title="LineNr "class="LineNr">3</span>  <span title="shStatement "class="shStatement">cd</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">dirname </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$0</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">4</span>  <span title="shStatement "class="shStatement">source</span><span title="Normal "class="Normal"> util/vars.sh
</span><span title="LineNr "class="LineNr">5</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">6</span>  <span title="shFunction "class="shFunction">get_output() {
</span><span title="LineNr "class="LineNr">7</span>  <span title="shFunctionOne "class="shFunctionOne">    </span><span title="shSubShRegion "class="shSubShRegion">(
</span><span title="LineNr "class="LineNr">8</span>  <span title="shFunctionOne "class="shFunctionOne">        </span><span title="shVariable "class="shVariable">SELF</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$1</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">9</span>  <span title="shFunctionOne "class="shFunctionOne">        </span><span title="shStatement "class="shStatement">source</span><span title="shFunctionOne "class="shFunctionOne"> </span><span title="shDerefSimple "class="shDerefSimple">$1
</span><span title="LineNr "class="LineNr">10</span>  <span title="shFunctionOne "class="shFunctionOne">        </span><span title="shConditional "class="shConditional">if </span><span title="shFunctionOne "class="shFunctionOne">ffbuild_enabled</span><span title="shOperator "class="shOperator">;</span><span title="shFunctionOne "class="shFunctionOne"> </span><span title="shConditional "class="shConditional">then
</span><span title="LineNr "class="LineNr">11</span>  <span title="shFunctionOne "class="shFunctionOne">            ffbuild_</span><span title="shDerefSimple "class="shDerefSimple">$2</span><span title="shFunctionOne "class="shFunctionOne"> </span><span title="shOperator "class="shOperator">||</span><span title="shFunctionOne "class="shFunctionOne"> </span><span title="shStatement "class="shStatement">exit</span><span title="shFunctionOne "class="shFunctionOne"> </span><span title="shNumber "class="shNumber">0
</span><span title="LineNr "class="LineNr">12</span>  <span title="shFunctionOne "class="shFunctionOne">        </span><span title="shConditional "class="shConditional">else
</span><span title="LineNr "class="LineNr">13</span>  <span title="shFunctionOne "class="shFunctionOne">            ffbuild_un</span><span title="shDerefSimple "class="shDerefSimple">$2</span><span title="shFunctionOne "class="shFunctionOne"> </span><span title="shOperator "class="shOperator">||</span><span title="shFunctionOne "class="shFunctionOne"> </span><span title="shStatement "class="shStatement">exit</span><span title="shFunctionOne "class="shFunctionOne"> </span><span title="shNumber "class="shNumber">0
</span><span title="LineNr "class="LineNr">14</span>  <span title="shFunctionOne "class="shFunctionOne">        </span><span title="shConditional "class="shConditional">fi
</span><span title="LineNr "class="LineNr">15</span>  <span title="shFunctionOne "class="shFunctionOne">    </span><span title="shSubShRegion "class="shSubShRegion">)
</span><span title="LineNr "class="LineNr">16</span>  <span title="shFunction "class="shFunction">}
</span><span title="LineNr "class="LineNr">17</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">18</span>  <span title="shStatement "class="shStatement">source</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">variants/</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">TARGET</span><span title="PreProc "class="PreProc">}</span><span title="shDoubleQuote "class="shDoubleQuote">-</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">VARIANT</span><span title="PreProc "class="PreProc">}</span><span title="shDoubleQuote "class="shDoubleQuote">.sh</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">19</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">20</span>  <span title="shLoop "class="shLoop">for</span><span title="shFor "class="shFor"> addin </span><span title="shLoop "class="shLoop">in</span><span title="Normal "class="Normal"> </span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">ADDINS</span><span title="shDeref "class="shDeref">[</span><span title="shDerefVarArray "class="shDerefVarArray">*</span><span title="shDeref "class="shDeref">]</span><span title="PreProc "class="PreProc">}</span><span title="Normal "class="Normal">; </span><span title="shConditional "class="shConditional">do
</span><span title="LineNr "class="LineNr">21</span>  <span title="Normal "class="Normal">    </span><span title="shStatement "class="shStatement">source</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">addins/</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">addin</span><span title="PreProc "class="PreProc">}</span><span title="shDoubleQuote "class="shDoubleQuote">.sh</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">22</span>  <span title="shConditional "class="shConditional">done
</span><span title="LineNr "class="LineNr">23</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">24</span>  <span title="shStatement "class="shStatement">export</span><span title="Normal "class="Normal"> </span><span title="shVariable "class="shVariable">FFBUILD_PREFIX</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">docker run </span><span title="shOption "class="shOption">--rm</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$IMAGE</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCommandSub "class="shCommandSub"> bash </span><span title="shOption "class="shOption">-c</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&#39;</span><span title="shSingleQuote "class="shSingleQuote">echo $FFBUILD_PREFIX</span><span title="shQuote "class="shQuote">&#39;</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">25</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">26</span>  <span title="shLoop "class="shLoop">for</span><span title="shFor "class="shFor"> script </span><span title="shLoop "class="shLoop">in</span><span title="Normal "class="Normal"> scripts.d/*.sh; </span><span title="shConditional "class="shConditional">do
</span><span title="LineNr "class="LineNr">27</span>  <span title="Normal "class="Normal">    </span><span title="shVariable "class="shVariable">FF_CONFIGURE+</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote"> </span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">get_output </span><span title="shDerefSimple "class="shDerefSimple">$script</span><span title="shCommandSub "class="shCommandSub"> configure</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">28</span>  <span title="Normal "class="Normal">    </span><span title="shVariable "class="shVariable">FF_CFLAGS+</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote"> </span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">get_output </span><span title="shDerefSimple "class="shDerefSimple">$script</span><span title="shCommandSub "class="shCommandSub"> cflags</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">29</span>  <span title="Normal "class="Normal">    </span><span title="shVariable "class="shVariable">FF_CXXFLAGS+</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote"> </span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">get_output </span><span title="shDerefSimple "class="shDerefSimple">$script</span><span title="shCommandSub "class="shCommandSub"> cxxflags</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">30</span>  <span title="Normal "class="Normal">    </span><span title="shVariable "class="shVariable">FF_LDFLAGS+</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote"> </span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">get_output </span><span title="shDerefSimple "class="shDerefSimple">$script</span><span title="shCommandSub "class="shCommandSub"> ldflags</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">31</span>  <span title="Normal "class="Normal">    </span><span title="shVariable "class="shVariable">FF_LIBS+</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote"> </span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">get_output </span><span title="shDerefSimple "class="shDerefSimple">$script</span><span title="shCommandSub "class="shCommandSub"> libs</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">32</span>  <span title="shConditional "class="shConditional">done
</span><span title="LineNr "class="LineNr">33</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">34</span>  <span title="shVariable "class="shVariable">FF_CONFIGURE</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">xargs </span><span title="shHereString "class="shHereString">&lt;&lt;&lt;</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$FF_CONFIGURE</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">35</span>  <span title="shVariable "class="shVariable">FF_CFLAGS</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">xargs </span><span title="shHereString "class="shHereString">&lt;&lt;&lt;</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$FF_CFLAGS</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">36</span>  <span title="shVariable "class="shVariable">FF_CXXFLAGS</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">xargs </span><span title="shHereString "class="shHereString">&lt;&lt;&lt;</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$FF_CXXFLAGS</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">37</span>  <span title="shVariable "class="shVariable">FF_LDFLAGS</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">xargs </span><span title="shHereString "class="shHereString">&lt;&lt;&lt;</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$FF_LDFLAGS</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">38</span>  <span title="shVariable "class="shVariable">FF_LIBS</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">xargs </span><span title="shHereString "class="shHereString">&lt;&lt;&lt;</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$FF_LIBS</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">39</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">40</span>  <span title="shVariable "class="shVariable">TESTFILE</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">uidtestfile</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">41</span>  <span title="bashStatement "class="bashStatement">rm</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-f</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$TESTFILE</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">42</span>  <span title="Normal "class="Normal">docker run </span><span title="shOption "class="shOption">--rm</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-v</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$PWD</span><span title="shDoubleQuote "class="shDoubleQuote">:/uidtestdir</span><span title="shQuote "class="shQuote">&quot;</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$IMAGE</span><span title="shQuote "class="shQuote">&quot;</span><span title="Normal "class="Normal"> /usr/bin/</span><span title="shTouchCmd "class="shTouchCmd">touch</span><span title="shTouch "class="shTouch"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">/uidtestdir/</span><span title="shDerefSimple "class="shDerefSimple">$TESTFILE</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">43</span>  <span title="shVariable "class="shVariable">DOCKERUID</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">stat </span><span title="shOption "class="shOption">-c</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">%u</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCommandSub "class="shCommandSub"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$TESTFILE</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">44</span>  <span title="bashStatement "class="bashStatement">rm</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-f</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$TESTFILE</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">45</span>  <span title="Delimiter "class="Delimiter">[[</span><span title="shDblBrace "class="shDblBrace"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$DOCKERUID</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDblBrace "class="shDblBrace"> </span><span title="shTestOpr "class="shTestOpr">!&#61;</span><span title="shDblBrace "class="shDblBrace"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">id </span><span title="shOption "class="shOption">-u</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDblBrace "class="shDblBrace"> </span><span title="Delimiter "class="Delimiter">]]</span><span title="Normal "class="Normal"> &amp;&amp; </span><span title="shVariable "class="shVariable">UIDARGS</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shCmdSubRegion "class="shCmdSubRegion">(</span><span title="shCmdParenRegion "class="shCmdParenRegion"> </span><span title="shOption "class="shOption">-u</span><span title="shCmdParenRegion "class="shCmdParenRegion"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">id </span><span title="shOption "class="shOption">-u</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shDoubleQuote "class="shDoubleQuote">:</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">id </span><span title="shOption "class="shOption">-g</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;</span><span title="shCmdParenRegion "class="shCmdParenRegion"> </span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="Normal "class="Normal"> || </span><span title="shVariable "class="shVariable">UIDARGS</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shCmdSubRegion "class="shCmdSubRegion">()
</span><span title="LineNr "class="LineNr">46</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">47</span>  <span title="bashStatement "class="bashStatement">rm</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-rf</span><span title="Normal "class="Normal"> ffbuild
</span><span title="LineNr "class="LineNr">48</span>  <span title="bashStatement "class="bashStatement">mkdir</span><span title="Normal "class="Normal"> ffbuild
</span><span title="LineNr "class="LineNr">49</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">50</span>  <span title="Normal "class="Normal">docker run </span><span title="shOption "class="shOption">--rm</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-i</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">UIDARGS</span><span title="shDeref "class="shDeref">[</span><span title="shDerefVarArray "class="shDerefVarArray">@</span><span title="shDeref "class="shDeref">]</span><span title="PreProc "class="PreProc">}</span><span title="shQuote "class="shQuote">&quot;</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-v</span><span title="Normal "class="Normal"> </span><span title="shDerefSimple "class="shDerefSimple">$PWD</span><span title="Normal "class="Normal">/ffbuild:/ffbuild </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$IMAGE</span><span title="shQuote "class="shQuote">&quot;</span><span title="Normal "class="Normal"> bash </span><span title="shOption "class="shOption">-s</span><span title="Normal "class="Normal"> </span><span title="shHereDoc01 "class="shHereDoc01">&lt;&lt;EOF
</span><span title="LineNr "class="LineNr">51</span>  <span title="shHereDoc "class="shHereDoc">    set -xe
</span><span title="LineNr "class="LineNr">52</span>  <span title="shHereDoc "class="shHereDoc">    cd /ffbuild
</span><span title="LineNr "class="LineNr">53</span>  <span title="shHereDoc "class="shHereDoc">    rm -rf ffmpeg prefix
</span><span title="LineNr "class="LineNr">54</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">55</span>  <span title="shHereDoc "class="shHereDoc">    git clone https://github.com/FFmpeg/FFmpeg.git ffmpeg
</span><span title="LineNr "class="LineNr">56</span>  <span title="shHereDoc "class="shHereDoc">    cd ffmpeg
</span><span title="LineNr "class="LineNr">57</span>  <span title="shHereDoc "class="shHereDoc">    git checkout </span><span title="shDerefSimple "class="shDerefSimple">$GIT_BRANCH
</span><span title="LineNr "class="LineNr">58</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">59</span>  <span title="shHereDoc "class="shHereDoc">    ./configure --prefix&#61;/ffbuild/prefix --pkg-config-flags&#61;&quot;--static&quot;
</span><span title="LineNr "class="LineNr">60</span>  <span title="shHereDoc "class="shHereDoc">    make -j</span><span title="shSpecialDQ "class="shSpecialDQ">\$</span><span title="shHereDoc "class="shHereDoc">(nproc)
</span><span title="LineNr "class="LineNr">61</span>  <span title="shHereDoc "class="shHereDoc">    make install
</span><span title="LineNr "class="LineNr">62</span>  <span title="shHereDoc01 "class="shHereDoc01">EOF
</span><span title="LineNr "class="LineNr">63</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">64</span>  <span title="bashStatement "class="bashStatement">mkdir</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-p</span><span title="Normal "class="Normal"> artifacts
</span><span title="LineNr "class="LineNr">65</span>  <span title="shVariable "class="shVariable">ARTIFACTS_PATH</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$PWD</span><span title="shDoubleQuote "class="shDoubleQuote">/artifacts</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">66</span>  <span title="shVariable "class="shVariable">BUILD_NAME</span><span title="shVarAssign "class="shVarAssign">&#61;</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">ffmpeg-</span><span title="shCmdSubRegion "class="shCmdSubRegion">$(</span><span title="shCommandSub "class="shCommandSub">./ffbuild/ffmpeg/ffbuild/version.sh</span><span title="shCmdSubRegion "class="shCmdSubRegion">)</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">67</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">68</span>  <span title="bashStatement "class="bashStatement">mkdir</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-p</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">ffbuild/pkgroot/</span><span title="shDerefSimple "class="shDerefSimple">$BUILD_NAME</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">69</span>  <span title="Normal "class="Normal">package_variant ffbuild/prefix </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">ffbuild/pkgroot/</span><span title="shDerefSimple "class="shDerefSimple">$BUILD_NAME</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">70</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">71</span>  <span title="shStatement "class="shStatement">cd</span><span title="Normal "class="Normal"> ffbuild/pkgroot
</span><span title="LineNr "class="LineNr">72</span>  <span title="Normal "class="Normal">zip </span><span title="shNumber "class="shNumber">-9</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-r</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">ARTIFACTS_PATH</span><span title="PreProc "class="PreProc">}</span><span title="shDoubleQuote "class="shDoubleQuote">/</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">BUILD_NAME</span><span title="PreProc "class="PreProc">}</span><span title="shDoubleQuote "class="shDoubleQuote">.zip</span><span title="shQuote "class="shQuote">&quot;</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$BUILD_NAME</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">73</span>  <span title="shStatement "class="shStatement">cd</span><span title="Normal "class="Normal"> -
</span><span title="LineNr "class="LineNr">74</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">75</span>  <span title="bashStatement "class="bashStatement">rm</span><span title="Normal "class="Normal"> </span><span title="shOption "class="shOption">-rf</span><span title="Normal "class="Normal"> ffbuild
</span><span title="LineNr "class="LineNr">76</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">77</span>  <span title="shConditional "class="shConditional">if </span><span title="Delimiter "class="Delimiter">[[</span><span title="shDblBrace "class="shDblBrace"> </span><span title="shTestOpr "class="shTestOpr">-n</span><span title="shDblBrace "class="shDblBrace"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDerefSimple "class="shDerefSimple">$GITHUB_ACTIONS</span><span title="shQuote "class="shQuote">&quot;</span><span title="shDblBrace "class="shDblBrace"> </span><span title="Delimiter "class="Delimiter">]]</span><span title="shOperator "class="shOperator">;</span><span title="Normal "class="Normal"> </span><span title="shConditional "class="shConditional">then
</span><span title="LineNr "class="LineNr">78</span>  <span title="Normal "class="Normal">    </span><span title="shStatement "class="shStatement">echo</span><span title="shEcho "class="shEcho"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="shDoubleQuote "class="shDoubleQuote">::set-output name&#61;build_name::</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">BUILD_NAME</span><span title="PreProc "class="PreProc">}</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr">79</span>  <span title="Normal "class="Normal">    </span><span title="shStatement "class="shStatement">echo</span><span title="shEcho "class="shEcho"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">BUILD_NAME</span><span title="PreProc "class="PreProc">}</span><span title="shDoubleQuote "class="shDoubleQuote">.zip</span><span title="shQuote "class="shQuote">&quot;</span><span title="shEcho "class="shEcho"> </span><span title="shTestOpr "class="shTestOpr">&gt;</span><span title="Normal "class="Normal"> </span><span title="shQuote "class="shQuote">&quot;</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">ARTIFACTS_PATH</span><span title="PreProc "class="PreProc">}</span><span title="shDoubleQuote "class="shDoubleQuote">/</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">TARGET</span><span title="PreProc "class="PreProc">}</span><span title="shDoubleQuote "class="shDoubleQuote">-</span><span title="PreProc "class="PreProc">${</span><span title="shDerefVar "class="shDerefVar">VARIANT</span><span title="PreProc "class="PreProc">}</span><span title="shQuote "class="shQuote">&quot;
</span><span title="LineNr "class="LineNr last-LineNr">80</span>  <span title="shConditional "class="shConditional">fi</span>