<span title="LineNr "class="LineNr first-LineNr">1</span>  <span title="perlSharpBang "class="perlSharpBang">#!/usr/bin/perl -w
</span><span title="LineNr "class="LineNr">2</span>  <span title="perlComment "class="perlComment">#
</span><span title="LineNr "class="LineNr">3</span>  <span title="perlComment "class="perlComment"># hotcoldgraph.pl	flame/cold stack grapher.
</span><span title="LineNr "class="LineNr">4</span>  <span title="perlComment "class="perlComment">#
</span><span title="LineNr "class="LineNr">5</span>  <span title="perlComment "class="perlComment"># EXPERIMENTAL: This is a work in progress, and may not work properly.
</span><span title="LineNr "class="LineNr">6</span>  <span title="perlComment "class="perlComment">#
</span><span title="LineNr "class="LineNr">7</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">8</span>  <span title="perlStatementInclude "class="perlStatementInclude">use strict</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">9</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">10</span>  <span title="perlComment "class="perlComment"># tunables
</span><span title="LineNr "class="LineNr">11</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$fonttype</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">Verdana</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">12</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$imagewidth</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">1200</span><span title="Normal "class="Normal">;		</span><span title="perlComment "class="perlComment"># max width, pixels
</span><span title="LineNr "class="LineNr">13</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$frameheight</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">16</span><span title="Normal "class="Normal">;		</span><span title="perlComment "class="perlComment"># max height is dynamic
</span><span title="LineNr "class="LineNr">14</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$fontsize</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">12</span><span title="Normal "class="Normal">;		</span><span title="perlComment "class="perlComment"># base text size
</span><span title="LineNr "class="LineNr">15</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$minwidth</span><span title="Normal "class="Normal"> &#61; </span><span title="perlFloat "class="perlFloat">0.1</span><span title="Normal "class="Normal">;		</span><span title="perlComment "class="perlComment"># min function width, pixels
</span><span title="LineNr "class="LineNr">16</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">17</span>  <span title="perlComment "class="perlComment"># internals
</span><span title="LineNr "class="LineNr">18</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$ypad1</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$fontsize</span><span title="Normal "class="Normal"> * </span><span title="perlNumber "class="perlNumber">4</span><span title="Normal "class="Normal">;	</span><span title="perlComment "class="perlComment"># pad top, include title
</span><span title="LineNr "class="LineNr">19</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$ypad2</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$fontsize</span><span title="Normal "class="Normal"> * </span><span title="perlNumber "class="perlNumber">2</span><span title="Normal "class="Normal"> + </span><span title="perlNumber "class="perlNumber">10</span><span title="Normal "class="Normal">;	</span><span title="perlComment "class="perlComment"># pad bottom, include labels
</span><span title="LineNr "class="LineNr">20</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$xpad</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">10</span><span title="Normal "class="Normal">;			</span><span title="perlComment "class="perlComment"># pad lefm and right
</span><span title="LineNr "class="LineNr">21</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$timemax</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">22</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$depthmax</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">23</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain2 "class="perlVarPlain2">%Events</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">24</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">25</span>  <span title="perlComment "class="perlComment"># SVG functions
</span><span title="LineNr "class="LineNr">26</span>  <span title="Normal "class="Normal">{ </span><span title="perlStatementPackage "class="perlStatementPackage">package</span><span title="perlPackageDecl "class="perlPackageDecl"> SVG</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">27</span>  <span title="Normal "class="Normal">	</span><span title="perlFunction "class="perlFunction">sub </span><span title="perlSubName "class="perlSubName">new </span><span title="Normal "class="Normal">{
</span><span title="LineNr "class="LineNr">28</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$class</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStatementList "class="perlStatementList">shift</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">29</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$self</span><span title="Normal "class="Normal"> &#61; {};
</span><span title="LineNr "class="LineNr">30</span>  <span title="Normal "class="Normal">		</span><span title="perlOperator "class="perlOperator">bless</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$self</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$class</span><span title="Normal "class="Normal">);
</span><span title="LineNr "class="LineNr">31</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementControl "class="perlStatementControl">return</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$self</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">32</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">33</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">34</span>  <span title="Normal "class="Normal">	</span><span title="perlFunction "class="perlFunction">sub </span><span title="perlSubName "class="perlSubName">include </span><span title="Normal "class="Normal">{
</span><span title="LineNr "class="LineNr">35</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$self</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$content</span><span title="Normal "class="Normal">) &#61; </span><span title="perlVarPlain "class="perlVarPlain">@_</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">36</span>  <span title="Normal "class="Normal">		</span><span title="perlVarPlain "class="perlVarPlain">$self</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">-&gt;{</span><span title="perlVarSimpleMemberName "class="perlVarSimpleMemberName">svg</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">}</span><span title="Normal "class="Normal"> .&#61; </span><span title="perlVarPlain "class="perlVarPlain">$content</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">37</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">38</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">39</span>  <span title="Normal "class="Normal">	</span><span title="perlFunction "class="perlFunction">sub </span><span title="perlSubName "class="perlSubName">colorAllocate </span><span title="Normal "class="Normal">{
</span><span title="LineNr "class="LineNr">40</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$self</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$r</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$g</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$b</span><span title="Normal "class="Normal">) &#61; </span><span title="perlVarPlain "class="perlVarPlain">@_</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">41</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementControl "class="perlStatementControl">return</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">rgb(</span><span title="perlVarPlain "class="perlVarPlain">$r</span><span title="perlString "class="perlString">,</span><span title="perlVarPlain "class="perlVarPlain">$g</span><span title="perlString "class="perlString">,</span><span title="perlVarPlain "class="perlVarPlain">$b</span><span title="perlString "class="perlString">)</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">42</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">43</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">44</span>  <span title="Normal "class="Normal">	</span><span title="perlFunction "class="perlFunction">sub </span><span title="perlSubName "class="perlSubName">svg </span><span title="Normal "class="Normal">{
</span><span title="LineNr "class="LineNr">45</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$self</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStatementList "class="perlStatementList">shift</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">46</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementControl "class="perlStatementControl">return</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlVarPlain "class="perlVarPlain">$self</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">-&gt;{</span><span title="perlVarSimpleMemberName "class="perlVarSimpleMemberName">svg</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">}</span><span title="perlString "class="perlString">&lt;/svg&gt;</span><span title="perlSpecialString "class="perlSpecialString">\n</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">47</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">48</span>  <span title="Normal "class="Normal">	</span><span title="perlNumber "class="perlNumber">1</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">49</span>  <span title="Normal "class="Normal">}
</span><span title="LineNr "class="LineNr">50</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">51</span>  <span title="perlFunction "class="perlFunction">sub </span><span title="perlSubName "class="perlSubName">color </span><span title="Normal "class="Normal">{
</span><span title="LineNr "class="LineNr">52</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$type</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStatementList "class="perlStatementList">shift</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">53</span>  <span title="Normal "class="Normal">	</span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> (</span><span title="perlOperator "class="perlOperator">defined</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$type</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">and</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$type</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">eq</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">hot</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">) {
</span><span title="LineNr "class="LineNr">54</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$r</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">205</span><span title="Normal "class="Normal"> + </span><span title="perlStatementNumeric "class="perlStatementNumeric">int</span><span title="Normal "class="Normal">(</span><span title="perlStatementNumeric "class="perlStatementNumeric">rand</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">50</span><span title="Normal "class="Normal">));
</span><span title="LineNr "class="LineNr">55</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$g</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal"> + </span><span title="perlStatementNumeric "class="perlStatementNumeric">int</span><span title="Normal "class="Normal">(</span><span title="perlStatementNumeric "class="perlStatementNumeric">rand</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">230</span><span title="Normal "class="Normal">));
</span><span title="LineNr "class="LineNr">56</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$b</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal"> + </span><span title="perlStatementNumeric "class="perlStatementNumeric">int</span><span title="Normal "class="Normal">(</span><span title="perlStatementNumeric "class="perlStatementNumeric">rand</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">55</span><span title="Normal "class="Normal">));
</span><span title="LineNr "class="LineNr">57</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementControl "class="perlStatementControl">return</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">rgb(</span><span title="perlVarPlain "class="perlVarPlain">$r</span><span title="perlString "class="perlString">,</span><span title="perlVarPlain "class="perlVarPlain">$g</span><span title="perlString "class="perlString">,</span><span title="perlVarPlain "class="perlVarPlain">$b</span><span title="perlString "class="perlString">)</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">58</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">59</span>  <span title="Normal "class="Normal">	</span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> (</span><span title="perlOperator "class="perlOperator">defined</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$type</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">and</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$type</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">eq</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">cold</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">) {
</span><span title="LineNr "class="LineNr">60</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$r</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal"> + </span><span title="perlStatementNumeric "class="perlStatementNumeric">int</span><span title="Normal "class="Normal">(</span><span title="perlStatementNumeric "class="perlStatementNumeric">rand</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">40</span><span title="Normal "class="Normal">));
</span><span title="LineNr "class="LineNr">61</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$b</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">205</span><span title="Normal "class="Normal"> + </span><span title="perlStatementNumeric "class="perlStatementNumeric">int</span><span title="Normal "class="Normal">(</span><span title="perlStatementNumeric "class="perlStatementNumeric">rand</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">50</span><span title="Normal "class="Normal">));
</span><span title="LineNr "class="LineNr">62</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$g</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal"> + </span><span title="perlStatementNumeric "class="perlStatementNumeric">int</span><span title="Normal "class="Normal">(</span><span title="perlStatementNumeric "class="perlStatementNumeric">rand</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">150</span><span title="Normal "class="Normal">));
</span><span title="LineNr "class="LineNr">63</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementControl "class="perlStatementControl">return</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">rgb(</span><span title="perlVarPlain "class="perlVarPlain">$r</span><span title="perlString "class="perlString">,</span><span title="perlVarPlain "class="perlVarPlain">$g</span><span title="perlString "class="perlString">,</span><span title="perlVarPlain "class="perlVarPlain">$b</span><span title="perlString "class="perlString">)</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">64</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">65</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementControl "class="perlStatementControl">return</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">rgb(0,0,0)</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">66</span>  <span title="Normal "class="Normal">}
</span><span title="LineNr "class="LineNr">67</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">68</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain2 "class="perlVarPlain2">%Node</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">69</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain2 "class="perlVarPlain2">%Tmp</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">70</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">71</span>  <span title="perlFunction "class="perlFunction">sub </span><span title="perlSubName "class="perlSubName">flow </span><span title="Normal "class="Normal">{
</span><span title="LineNr "class="LineNr">72</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$a</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$b</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$ca</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$cb</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$v</span><span title="Normal "class="Normal">) &#61; </span><span title="perlVarPlain "class="perlVarPlain">@_</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">73</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">@A</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStatementRegexp "class="perlStatementRegexp">split</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">,</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$a</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">74</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">@B</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStatementRegexp "class="perlStatementRegexp">split</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">,</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$b</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">75</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">76</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$len_a</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$#A</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">77</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$len_b</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$#B</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">78</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$depthmax</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$len_b</span><span title="Normal "class="Normal"> </span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$len_b</span><span title="Normal "class="Normal"> &gt; </span><span title="perlVarPlain "class="perlVarPlain">$depthmax</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">79</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">80</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">81</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$len_same</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">82</span>  <span title="Normal "class="Normal">	</span><span title="perlRepeat "class="perlRepeat">for</span><span title="Normal "class="Normal"> (; </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal"> &lt;&#61; </span><span title="perlVarPlain "class="perlVarPlain">$len_a</span><span title="Normal "class="Normal">; </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal">++) {
</span><span title="LineNr "class="LineNr">83</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementControl "class="perlStatementControl">last</span><span title="Normal "class="Normal"> </span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal"> &gt; </span><span title="perlVarPlain "class="perlVarPlain">$len_b</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">84</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementControl "class="perlStatementControl">last</span><span title="Normal "class="Normal"> </span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$A[$i]</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">ne</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$B[$i]</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">85</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">86</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$len_same</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">87</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$len_same</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal"> </span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$ca</span><span title="Normal "class="Normal"> !&#61; </span><span title="perlVarPlain "class="perlVarPlain">$cb</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">88</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">89</span>  <span title="Normal "class="Normal">	</span><span title="perlRepeat "class="perlRepeat">for</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$len_a</span><span title="Normal "class="Normal">; </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal"> &gt;&#61; </span><span title="perlVarPlain "class="perlVarPlain">$len_same</span><span title="Normal "class="Normal">; </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal">--) {
</span><span title="LineNr "class="LineNr">90</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$k</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlVarPlain "class="perlVarPlain">$A[$i]</span><span title="perlString "class="perlString">-</span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">91</span>  <span title="Normal "class="Normal">		</span><span title="perlComment "class="perlComment"># a unique ID is constructed from func-depth-etime;
</span><span title="LineNr "class="LineNr">92</span>  <span title="Normal "class="Normal">		</span><span title="perlComment "class="perlComment"># func-depth isn&#39;t unique, it may be repeated later.
</span><span title="LineNr "class="LineNr">93</span>  <span title="Normal "class="Normal">		</span><span title="perlVarPlain "class="perlVarPlain">$Node{</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlVarPlain "class="perlVarPlain">$k</span><span title="perlString "class="perlString">-</span><span title="perlVarPlain "class="perlVarPlain">$v</span><span title="perlString "class="perlString">-</span><span title="perlVarPlain "class="perlVarPlain">$ca</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlVarPlain "class="perlVarPlain">}</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">-&gt;{</span><span title="perlVarSimpleMemberName "class="perlVarSimpleMemberName">stime</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">}</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$Tmp{$k}</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">-&gt;{</span><span title="perlVarSimpleMemberName "class="perlVarSimpleMemberName">stime</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">}</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">94</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementHash "class="perlStatementHash">delete</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$Tmp{$k}</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">-&gt;{</span><span title="perlVarSimpleMemberName "class="perlVarSimpleMemberName">stime</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">}</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">95</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementHash "class="perlStatementHash">delete</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$Tmp{$k}</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">96</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">97</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">98</span>  <span title="Normal "class="Normal">	</span><span title="perlRepeat "class="perlRepeat">for</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$len_same</span><span title="Normal "class="Normal">; </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal"> &lt;&#61; </span><span title="perlVarPlain "class="perlVarPlain">$len_b</span><span title="Normal "class="Normal">; </span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="Normal "class="Normal">++) {
</span><span title="LineNr "class="LineNr">99</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$k</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlVarPlain "class="perlVarPlain">$B[$i]</span><span title="perlString "class="perlString">-</span><span title="perlVarPlain "class="perlVarPlain">$i</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">100</span>  <span title="Normal "class="Normal">		</span><span title="perlVarPlain "class="perlVarPlain">$Tmp{$k}</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">-&gt;{</span><span title="perlVarSimpleMemberName "class="perlVarSimpleMemberName">stime</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">}</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$v</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">101</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">102</span>  <span title="Normal "class="Normal">}
</span><span title="LineNr "class="LineNr">103</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">104</span>  <span title="perlComment "class="perlComment"># Parse input
</span><span title="LineNr "class="LineNr">105</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">@Data</span><span title="Normal "class="Normal"> &#61; &lt;&gt;;
</span><span title="LineNr "class="LineNr">106</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$laststack</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">107</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$lastcpu</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">108</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$time</span><span title="Normal "class="Normal"> &#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">109</span>  <span title="perlRepeat "class="perlRepeat">foreach</span><span title="Normal "class="Normal"> (</span><span title="perlStatementList "class="perlStatementList">sort</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">@Data</span><span title="Normal "class="Normal">) {
</span><span title="LineNr "class="LineNr">110</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementScalar "class="perlStatementScalar">chomp</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">111</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$stack</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$cpu</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$samples</span><span title="Normal "class="Normal">) &#61; </span><span title="perlStatementRegexp "class="perlStatementRegexp">split</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&#39;</span><span title="perlStringUnexpanded "class="perlStringUnexpanded"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">112</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$stack</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">,</span><span title="perlVarPlain "class="perlVarPlain">$stack</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">113</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementControl "class="perlStatementControl">next</span><span title="Normal "class="Normal"> </span><span title="perlConditional "class="perlConditional">unless</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">defined</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$samples</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">114</span>  <span title="Normal "class="Normal">	flow(</span><span title="perlVarPlain "class="perlVarPlain">$laststack</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$stack</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$lastcpu</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$cpu</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$time</span><span title="Normal "class="Normal">);
</span><span title="LineNr "class="LineNr">115</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$time</span><span title="Normal "class="Normal"> +&#61; </span><span title="perlVarPlain "class="perlVarPlain">$samples</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">116</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$laststack</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$stack</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">117</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$lastcpu</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$cpu</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">118</span>  <span title="Normal "class="Normal">}
</span><span title="LineNr "class="LineNr">119</span>  <span title="Normal "class="Normal">flow(</span><span title="perlVarPlain "class="perlVarPlain">$laststack</span><span title="Normal "class="Normal">, </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;&quot;</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$lastcpu</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$time</span><span title="Normal "class="Normal">);
</span><span title="LineNr "class="LineNr">120</span>  <span title="perlVarPlain "class="perlVarPlain">$timemax</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$time</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">or</span><span title="Normal "class="Normal"> </span><span title="perlStatementFlow "class="perlStatementFlow">die</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">ERROR: No stack counts found</span><span title="perlSpecialString "class="perlSpecialString">\n</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">121</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">122</span>  <span title="perlComment "class="perlComment"># Draw canvas
</span><span title="LineNr "class="LineNr">123</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$widthpertime</span><span title="Normal "class="Normal"> &#61; (</span><span title="perlVarPlain "class="perlVarPlain">$imagewidth</span><span title="Normal "class="Normal"> - </span><span title="perlNumber "class="perlNumber">2</span><span title="Normal "class="Normal"> * </span><span title="perlVarPlain "class="perlVarPlain">$xpad</span><span title="Normal "class="Normal">) / </span><span title="perlVarPlain "class="perlVarPlain">$timemax</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">124</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$imageheight</span><span title="Normal "class="Normal"> &#61; (</span><span title="perlVarPlain "class="perlVarPlain">$depthmax</span><span title="Normal "class="Normal"> * </span><span title="perlVarPlain "class="perlVarPlain">$frameheight</span><span title="Normal "class="Normal">) + </span><span title="perlVarPlain "class="perlVarPlain">$ypad1</span><span title="Normal "class="Normal"> + </span><span title="perlVarPlain "class="perlVarPlain">$ypad2</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">125</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$im</span><span title="Normal "class="Normal"> &#61; SVG-&gt;new();
</span><span title="LineNr "class="LineNr">126</span>  <span title="perlVarPlain "class="perlVarPlain">$im</span><span title="perlMethod "class="perlMethod">-&gt;header</span><span title="Normal "class="Normal">(</span><span title="perlVarPlain "class="perlVarPlain">$imagewidth</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$imageheight</span><span title="Normal "class="Normal">);
</span><span title="LineNr "class="LineNr">127</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$inc</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStringStartEnd "class="perlStringStartEnd">&lt;&lt;INC</span><span title="perlHereDocStart "class="perlHereDocStart">;
</span><span title="LineNr "class="LineNr">128</span>  <span title="perlHereDoc "class="perlHereDoc">&lt;defs &gt;
</span><span title="LineNr "class="LineNr">129</span>  <span title="perlHereDoc "class="perlHereDoc">	&lt;linearGradient id&#61;&quot;background&quot; y1&#61;&quot;0&quot; y2&#61;&quot;1&quot; x1&#61;&quot;0&quot; x2&#61;&quot;0&quot; &gt;
</span><span title="LineNr "class="LineNr">130</span>  <span title="perlHereDoc "class="perlHereDoc">		&lt;stop stop-color&#61;&quot;#eeeeee&quot; offset&#61;&quot;5%&quot; /&gt;
</span><span title="LineNr "class="LineNr">131</span>  <span title="perlHereDoc "class="perlHereDoc">		&lt;stop stop-color&#61;&quot;#eeeeb0&quot; offset&#61;&quot;95%&quot; /&gt;
</span><span title="LineNr "class="LineNr">132</span>  <span title="perlHereDoc "class="perlHereDoc">	&lt;/linearGradient&gt;
</span><span title="LineNr "class="LineNr">133</span>  <span title="perlHereDoc "class="perlHereDoc">&lt;/defs&gt;
</span><span title="LineNr "class="LineNr">134</span>  <span title="perlHereDoc "class="perlHereDoc">&lt;style type&#61;&quot;text/css&quot;&gt;
</span><span title="LineNr "class="LineNr">135</span>  <span title="perlHereDoc "class="perlHereDoc">	rect[rx]:hover { stroke:black; stroke-width:1; }
</span><span title="LineNr "class="LineNr">136</span>  <span title="perlHereDoc "class="perlHereDoc">	text:hover { stroke:black; stroke-width:1; stroke-opacity:0.35; }
</span><span title="LineNr "class="LineNr">137</span>  <span title="perlHereDoc "class="perlHereDoc">&lt;/style&gt;
</span><span title="LineNr "class="LineNr">138</span>  <span title="perlHereDoc "class="perlHereDoc">&lt;script type&#61;&quot;text/ecmascript&quot;&gt;
</span><span title="LineNr "class="LineNr">139</span>  <span title="perlHereDoc "class="perlHereDoc">&lt;![CDATA[
</span><span title="LineNr "class="LineNr">140</span>  <span title="perlHereDoc "class="perlHereDoc">	var details;
</span><span title="LineNr "class="LineNr">141</span>  <span title="perlHereDoc "class="perlHereDoc">	function init(evt) { details &#61; document.getElementById(&quot;details&quot;).firstChild; }
</span><span title="LineNr "class="LineNr">142</span>  <span title="perlHereDoc "class="perlHereDoc">	function s(info) { details.nodeValue &#61; info; }
</span><span title="LineNr "class="LineNr">143</span>  <span title="perlHereDoc "class="perlHereDoc">	function c() { details.nodeValue &#61; &#39; &#39;; }
</span><span title="LineNr "class="LineNr">144</span>  <span title="perlHereDoc "class="perlHereDoc">]]&gt;
</span><span title="LineNr "class="LineNr">145</span>  <span title="perlHereDoc "class="perlHereDoc">&lt;/script&gt;
</span><span title="LineNr "class="LineNr">146</span>  <span title="perlStringStartEnd "class="perlStringStartEnd">INC
</span><span title="LineNr "class="LineNr">147</span>  <span title="perlVarPlain "class="perlVarPlain">$im</span><span title="perlMethod "class="perlMethod">-&gt;include</span><span title="Normal "class="Normal">(</span><span title="perlVarPlain "class="perlVarPlain">$inc</span><span title="Normal "class="Normal">);
</span><span title="LineNr "class="LineNr">148</span>  <span title="perlVarPlain "class="perlVarPlain">$im</span><span title="perlMethod "class="perlMethod">-&gt;filledRectangle</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$imagewidth</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$imageheight</span><span title="Normal "class="Normal">, </span><span title="perlStringStartEnd "class="perlStringStartEnd">&#39;</span><span title="perlStringUnexpanded "class="perlStringUnexpanded">url(#background)</span><span title="perlStringStartEnd "class="perlStringStartEnd">&#39;</span><span title="Normal "class="Normal">);
</span><span title="LineNr "class="LineNr">149</span>  <span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$white</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$black</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$vvdgrey</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$vdgrey</span><span title="Normal "class="Normal">) &#61; (
</span><span title="LineNr "class="LineNr">150</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$im</span><span title="perlMethod "class="perlMethod">-&gt;colorAllocate</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">255</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">255</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">255</span><span title="Normal "class="Normal">),
</span><span title="LineNr "class="LineNr">151</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$im</span><span title="perlMethod "class="perlMethod">-&gt;colorAllocate</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">),
</span><span title="LineNr "class="LineNr">152</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$im</span><span title="perlMethod "class="perlMethod">-&gt;colorAllocate</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">40</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">40</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">40</span><span title="Normal "class="Normal">),
</span><span title="LineNr "class="LineNr">153</span>  <span title="Normal "class="Normal">	</span><span title="perlVarPlain "class="perlVarPlain">$im</span><span title="perlMethod "class="perlMethod">-&gt;colorAllocate</span><span title="Normal "class="Normal">(</span><span title="perlNumber "class="perlNumber">160</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">160</span><span title="Normal "class="Normal">, </span><span title="perlNumber "class="perlNumber">160</span><span title="Normal "class="Normal">),
</span><span title="LineNr "class="LineNr">154</span>  <span title="Normal "class="Normal">    );
</span><span title="LineNr "class="LineNr">155</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">156</span>  <span title="perlComment "class="perlComment"># Draw frames
</span><span title="LineNr "class="LineNr">157</span>  <span title="perlRepeat "class="perlRepeat">foreach</span><span title="Normal "class="Normal"> </span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$id</span><span title="Normal "class="Normal"> (</span><span title="perlStatementHash "class="perlStatementHash">keys</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain2 "class="perlVarPlain2">%Node</span><span title="Normal "class="Normal">) {
</span><span title="LineNr "class="LineNr">158</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$func</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$depth</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$etime</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$cpu</span><span title="Normal "class="Normal">) &#61; </span><span title="perlStatementRegexp "class="perlStatementRegexp">split</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">-</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">, </span><span title="perlVarPlain "class="perlVarPlain">$id</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">159</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementFlow "class="perlStatementFlow">die</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">missing start for </span><span title="perlVarPlain "class="perlVarPlain">$id</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal"> </span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> !</span><span title="perlOperator "class="perlOperator">defined</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$Node{$id}</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">-&gt;{</span><span title="perlVarSimpleMemberName "class="perlVarSimpleMemberName">stime</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">}</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">160</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$stime</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$Node{$id}</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">-&gt;{</span><span title="perlVarSimpleMemberName "class="perlVarSimpleMemberName">stime</span><span title="perlVarSimpleMember "class="perlVarSimpleMember">}</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">161</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$samples</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$etime</span><span title="Normal "class="Normal"> - </span><span title="perlVarPlain "class="perlVarPlain">$stime</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">162</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">163</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$x1</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$xpad</span><span title="Normal "class="Normal"> + </span><span title="perlVarPlain "class="perlVarPlain">$stime</span><span title="Normal "class="Normal"> * </span><span title="perlVarPlain "class="perlVarPlain">$widthpertime</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">164</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$x2</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$xpad</span><span title="Normal "class="Normal"> + </span><span title="perlVarPlain "class="perlVarPlain">$etime</span><span title="Normal "class="Normal"> * </span><span title="perlVarPlain "class="perlVarPlain">$widthpertime</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">165</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$width</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$x2</span><span title="Normal "class="Normal"> - </span><span title="perlVarPlain "class="perlVarPlain">$x1</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">166</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementControl "class="perlStatementControl">next</span><span title="Normal "class="Normal"> </span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$width</span><span title="Normal "class="Normal"> &lt; </span><span title="perlVarPlain "class="perlVarPlain">$minwidth</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">167</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">168</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$y1</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$imageheight</span><span title="Normal "class="Normal"> - </span><span title="perlVarPlain "class="perlVarPlain">$ypad2</span><span title="Normal "class="Normal"> - (</span><span title="perlVarPlain "class="perlVarPlain">$depth</span><span title="Normal "class="Normal"> + </span><span title="perlNumber "class="perlNumber">1</span><span title="Normal "class="Normal">) * </span><span title="perlVarPlain "class="perlVarPlain">$frameheight</span><span title="Normal "class="Normal"> + </span><span title="perlNumber "class="perlNumber">1</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">169</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$y2</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$imageheight</span><span title="Normal "class="Normal"> - </span><span title="perlVarPlain "class="perlVarPlain">$ypad2</span><span title="Normal "class="Normal"> - </span><span title="perlVarPlain "class="perlVarPlain">$depth</span><span title="Normal "class="Normal"> * </span><span title="perlVarPlain "class="perlVarPlain">$frameheight</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">170</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">171</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$info</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">172</span>  <span title="Normal "class="Normal">	</span><span title="perlConditional "class="perlConditional">if</span><span title="Normal "class="Normal"> (</span><span title="perlVarPlain "class="perlVarPlain">$func</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">eq</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;&quot;</span><span title="Normal "class="Normal"> </span><span title="perlOperator "class="perlOperator">and</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$depth</span><span title="Normal "class="Normal"> &#61;&#61; </span><span title="perlNumber "class="perlNumber">0</span><span title="Normal "class="Normal">) {
</span><span title="LineNr "class="LineNr">173</span>  <span title="Normal "class="Normal">		</span><span title="perlVarPlain "class="perlVarPlain">$info</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">all (</span><span title="perlVarPlain "class="perlVarPlain">$samples</span><span title="perlString "class="perlString"> ms, 100%)</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">174</span>  <span title="Normal "class="Normal">	} </span><span title="perlConditional "class="perlConditional">else</span><span title="Normal "class="Normal"> {
</span><span title="LineNr "class="LineNr">175</span>  <span title="Normal "class="Normal">		</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$pct</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStatementScalar "class="perlStatementScalar">sprintf</span><span title="Normal "class="Normal"> </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">%.2f</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">, ((</span><span title="perlNumber "class="perlNumber">100</span><span title="Normal "class="Normal"> * </span><span title="perlVarPlain "class="perlVarPlain">$samples</span><span title="Normal "class="Normal">) / </span><span title="perlVarPlain "class="perlVarPlain">$timemax</span><span title="Normal "class="Normal">);
</span><span title="LineNr "class="LineNr">176</span>  <span title="Normal "class="Normal">		</span><span title="perlVarPlain "class="perlVarPlain">$info</span><span title="Normal "class="Normal"> &#61; </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlVarPlain "class="perlVarPlain">$func</span><span title="perlString "class="perlString"> (</span><span title="perlVarPlain "class="perlVarPlain">$samples</span><span title="perlString "class="perlString"> ms, </span><span title="perlVarPlain "class="perlVarPlain">$pct</span><span title="perlString "class="perlString">%)</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">177</span>  <span title="Normal "class="Normal">	}
</span><span title="LineNr "class="LineNr">178</span>  <span title="Normal "class="Normal">	</span><span title="perlStatementStorage "class="perlStatementStorage">my</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$color</span><span title="Normal "class="Normal"> &#61; </span><span title="perlVarPlain "class="perlVarPlain">$cpu</span><span title="Normal "class="Normal"> ? </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">hot</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal"> : </span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="perlString "class="perlString">cold</span><span title="perlStringStartEnd "class="perlStringStartEnd">&quot;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">179</span>  <span title="Normal "class="Normal">}
</span><span title="LineNr "class="LineNr">180</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr last-LineNr">181</span>  <span title="perlStatementFiledesc "class="perlStatementFiledesc">print</span><span title="Normal "class="Normal"> </span><span title="perlVarPlain "class="perlVarPlain">$im</span><span title="perlMethod "class="perlMethod">-&gt;svg</span><span title="Normal "class="Normal">;</span>