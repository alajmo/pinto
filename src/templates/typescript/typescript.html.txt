<span title="LineNr "class="LineNr first-LineNr">1</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">2</span>  <span title="typescriptBlock "class="typescriptBlock">  app,
</span><span title="LineNr "class="LineNr">3</span>  <span title="typescriptBlock "class="typescriptBlock">  BrowserWindow,
</span><span title="LineNr "class="LineNr">4</span>  <span title="typescriptBlock "class="typescriptBlock">  shell,
</span><span title="LineNr "class="LineNr">5</span>  <span title="typescriptBlock "class="typescriptBlock">  Menu,
</span><span title="LineNr "class="LineNr">6</span>  <span title="typescriptBlock "class="typescriptBlock">  BrowserWindowConstructorOptions,
</span><span title="LineNr "class="LineNr">7</span>  <span title="typescriptBraces "class="typescriptBraces">}</span><span title="Normal "class="Normal"> </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;electron&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">8</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> isAbsolute, normalize, sep </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="Normal "class="Normal"> </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;path&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">9</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> parse </span><span title="typescriptCastKeyword "class="typescriptCastKeyword">as</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptTypeReference "class="typescriptTypeReference">parseUrl</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="Normal "class="Normal"> </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;url&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">10</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> v4 </span><span title="typescriptCastKeyword "class="typescriptCastKeyword">as</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptTypeReference "class="typescriptTypeReference">uuidv4</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="Normal "class="Normal"> </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;uuid&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">11</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> fileUriToPath </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;file-uri-to-path&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">12</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> isDev </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;electron-is-dev&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">13</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> updater </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../updater&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">14</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> toElectronBackgroundColor </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../utils/to-electron-background-color&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">15</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> icon, homeDirectory </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="Normal "class="Normal"> </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../config/paths&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">16</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> createRPC </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../rpc&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">17</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> notify </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../notify&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">18</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> fetchNotifications </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../notifications&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">19</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> Session </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../session&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">20</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> contextMenuTemplate </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;./contextmenu&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">21</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> execCommand </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="Normal "class="Normal"> </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../commands&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">22</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> setRendererType, unsetRendererType </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="Normal "class="Normal"> </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../utils/renderer-utils&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">23</span>  <span title="typescriptImport "class="typescriptImport">import</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> decorateSessionOptions, decorateSessionClass </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="Normal "class="Normal"> </span><span title="typescriptImport "class="typescriptImport">from</span><span title="Normal "class="Normal"> </span><span title="typescriptString "class="typescriptString">&#39;../plugins&#39;</span><span title="Normal "class="Normal">;
</span><span title="LineNr "class="LineNr">24</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">25</span>  <span title="typescriptExport "class="typescriptExport">export</span><span title="Normal "class="Normal"> </span><span title="typescriptFuncKeyword "class="typescriptFuncKeyword">function</span><span title="Normal "class="Normal"> </span><span title="typescriptFuncName "class="typescriptFuncName">newWindow</span><span title="typescriptParens "class="typescriptParens">(
</span><span title="LineNr "class="LineNr">26</span>  <span title="typescriptCall "class="typescriptCall">  options_</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptTypeReference "class="typescriptTypeReference">BrowserWindowConstructorOptions</span><span title="typescriptFuncComma "class="typescriptFuncComma">,
</span><span title="LineNr "class="LineNr">27</span>  <span title="typescriptCall "class="typescriptCall">  cfg</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptPredefinedType "class="typescriptPredefinedType">any</span><span title="typescriptFuncComma "class="typescriptFuncComma">,
</span><span title="LineNr "class="LineNr">28</span>  <span title="typescriptCall "class="typescriptCall">  fn</span><span title="typescriptOptionalMark "class="typescriptOptionalMark">?</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncType "class="typescriptFuncType">win</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptFuncType "class="typescriptFuncType"> </span><span title="typescriptTypeReference "class="typescriptTypeReference">BrowserWindow</span><span title="typescriptParens "class="typescriptParens">) </span><span title="typescriptFuncTypeArrow "class="typescriptFuncTypeArrow">&#61;&gt;</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptPredefinedType "class="typescriptPredefinedType">void</span><span title="typescriptFuncComma "class="typescriptFuncComma">,
</span><span title="LineNr "class="LineNr">29</span>  <span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="Normal "class="Normal"> </span><span title="typescriptTypeReference "class="typescriptTypeReference">BrowserWindow</span><span title="Normal "class="Normal"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">30</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">classOpts</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptGlobal "class="typescriptGlobal">Object</span><span title="typescriptGlobalObjectDot "class="typescriptGlobalObjectDot">.</span><span title="typescriptBOMLocationMethod "class="typescriptBOMLocationMethod">assign</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">uid</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> uuidv4</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">31</span>  <span title="typescriptBlock "class="typescriptBlock">  app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocProp "class="typescriptDOMDocProp">plugins</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">decorateWindowClass</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">classOpts</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">32</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">33</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">winOpts</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptTypeReference "class="typescriptTypeReference">BrowserWindowConstructorOptions</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">34</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">minWidth</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptNumber "class="typescriptNumber">370</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">35</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">minHeight</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptNumber "class="typescriptNumber">190</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">36</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">backgroundColor</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> toElectronBackgroundColor</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">backgroundColor </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">||</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptString "class="typescriptString">&#39;#000&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">37</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">titleBarStyle</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptString "class="typescriptString">&#39;hiddenInset&#39;</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">38</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">title</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptString "class="typescriptString">&#39;Hyper.app&#39;</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">39</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptLineComment "class="typescriptLineComment">// we want to go frameless on Windows and Linux
</span><span title="LineNr "class="LineNr">40</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">frame</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptNodeGlobal "class="typescriptNodeGlobal">process</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">platform </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptString "class="typescriptString">&#39;darwin&#39;</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">41</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">transparent</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptNodeGlobal "class="typescriptNodeGlobal">process</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">platform </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptString "class="typescriptString">&#39;darwin&#39;</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">42</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">icon</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">43</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">show</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptGlobal "class="typescriptGlobal">Boolean</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">(
</span><span title="LineNr "class="LineNr">44</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">process</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">.</span><span title="typescriptObjectLabel "class="typescriptObjectLabel">env</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">.</span><span title="typescriptObjectLabel "class="typescriptObjectLabel">HYPER_DEBUG </span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">|| </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">process</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">.</span><span title="typescriptObjectLabel "class="typescriptObjectLabel">env</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">.</span><span title="typescriptObjectLabel "class="typescriptObjectLabel">HYPERTERM_DEBUG </span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">|| </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">isDev</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">45</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    ),
</span><span title="LineNr "class="LineNr">46</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">acceptFirstMouse</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBoolean "class="typescriptBoolean">true</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">47</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">webPreferences</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">48</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">nodeIntegration</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBoolean "class="typescriptBoolean">true</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">49</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">navigateOnDragDrop</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBoolean "class="typescriptBoolean">true</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">50</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">enableRemoteModule</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBoolean "class="typescriptBoolean">true</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">51</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">52</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptObjectSpread "class="typescriptObjectSpread">...</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">options_,
</span><span title="LineNr "class="LineNr">53</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">54</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">window</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptOperator "class="typescriptOperator">new</span><span title="typescriptBlock "class="typescriptBlock"> BrowserWindow</span><span title="typescriptParens "class="typescriptParens">(
</span><span title="LineNr "class="LineNr">55</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">    app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocProp "class="typescriptDOMDocProp">plugins</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">getDecoratedBrowserOptions</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">winOpts</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">,
</span><span title="LineNr "class="LineNr">56</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">  </span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">57</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">uid </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> classOpts</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">uid;
</span><span title="LineNr "class="LineNr">58</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">59</span>  <span title="typescriptBlock "class="typescriptBlock">  app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocProp "class="typescriptDOMDocProp">plugins</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">onWindowClass</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">60</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">uid </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> classOpts</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">uid;
</span><span title="LineNr "class="LineNr">61</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">62</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">rpc</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> createRPC</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">63</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">sessions</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptOperator "class="typescriptOperator">new</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptGlobal "class="typescriptGlobal">Map</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">64</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">65</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">updateBackgroundColor</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">66</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">cfg_</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocProp "class="typescriptDOMDocProp">plugins</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">getDecoratedConfig</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">67</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">setBackgroundColor</span><span title="typescriptParens "class="typescriptParens">(
</span><span title="LineNr "class="LineNr">68</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">      toElectronBackgroundColor</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">cfg_</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">backgroundColor </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">||</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptString "class="typescriptString">&#39;#000&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">,
</span><span title="LineNr "class="LineNr">69</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">    </span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">70</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">71</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">72</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// set working directory
</span><span title="LineNr "class="LineNr">73</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">let</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">argPath</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptNodeGlobal "class="typescriptNodeGlobal">process</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">argv</span><span title="typescriptProperty "class="typescriptProperty">[</span><span title="typescriptNumber "class="typescriptNumber">1</span><span title="typescriptBlock "class="typescriptBlock">];
</span><span title="LineNr "class="LineNr">74</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">argPath </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&amp;&amp;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptNodeGlobal "class="typescriptNodeGlobal">process</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">platform </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptString "class="typescriptString">&#39;win32&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">75</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptRegexpString "class="typescriptRegexpString">/[a-zA-Z]:&quot;/</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptRegExpMethod "class="typescriptRegExpMethod">test</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">argPath</span><span title="typescriptParens "class="typescriptParens">))</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">76</span>  <span title="typescriptBlock "class="typescriptBlock">      argPath </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> argPath</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBOMLocationMethod "class="typescriptBOMLocationMethod">replace</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;&quot;&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, sep</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">77</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">78</span>  <span title="typescriptBlock "class="typescriptBlock">    argPath </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> normalize</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">argPath </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">+</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> sep</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">79</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">80</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">let</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">workingDirectory</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> homeDirectory;
</span><span title="LineNr "class="LineNr">81</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">argPath </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&amp;&amp;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> isAbsolute</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">argPath</span><span title="typescriptParens "class="typescriptParens">))</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">82</span>  <span title="typescriptBlock "class="typescriptBlock">    workingDirectory </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> argPath;
</span><span title="LineNr "class="LineNr">83</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptConditional "class="typescriptConditional">else</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">workingDirectory </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&amp;&amp;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> isAbsolute</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">workingDirectory</span><span title="typescriptParens "class="typescriptParens">))</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">84</span>  <span title="typescriptBlock "class="typescriptBlock">    workingDirectory </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">workingDirectory;
</span><span title="LineNr "class="LineNr">85</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">86</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">87</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// config changes
</span><span title="LineNr "class="LineNr">88</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">cfgUnsubscribe</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">config</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">subscribe</span><span title="typescriptParens "class="typescriptParens">(()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">89</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">cfg_</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocProp "class="typescriptDOMDocProp">plugins</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">getDecoratedConfig</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">90</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">91</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// notify renderer
</span><span title="LineNr "class="LineNr">92</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">webContents</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptXHRMethod "class="typescriptXHRMethod">send</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;config change&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">93</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">94</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// notify user that shell changes require new sessions
</span><span title="LineNr "class="LineNr">95</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(
</span><span title="LineNr "class="LineNr">96</span>  <span title="typescriptConditionalParen "class="typescriptConditionalParen">      cfg_</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">shell </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">!&#61;&#61;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">shell </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">||
</span><span title="LineNr "class="LineNr">97</span>  <span title="typescriptConditionalParen "class="typescriptConditionalParen">      </span><span title="typescriptGlobal "class="typescriptGlobal">JSON</span><span title="typescriptGlobalJSONDot "class="typescriptGlobalJSONDot">.</span><span title="typescriptJSONStaticMethod "class="typescriptJSONStaticMethod">stringify</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">cfg_</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">shellArgs</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">!&#61;&#61;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptGlobal "class="typescriptGlobal">JSON</span><span title="typescriptGlobalJSONDot "class="typescriptGlobalJSONDot">.</span><span title="typescriptJSONStaticMethod "class="typescriptJSONStaticMethod">stringify</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">shellArgs</span><span title="typescriptParens "class="typescriptParens">)
</span><span title="LineNr "class="LineNr">98</span>  <span title="typescriptConditionalParen "class="typescriptConditionalParen">    </span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">99</span>  <span title="typescriptBlock "class="typescriptBlock">      notify</span><span title="typescriptParens "class="typescriptParens">(
</span><span title="LineNr "class="LineNr">100</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">        </span><span title="typescriptString "class="typescriptString">&#39;Shell configuration changed!&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">,
</span><span title="LineNr "class="LineNr">101</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">        </span><span title="typescriptString "class="typescriptString">&#39;Open a new tab or window to start using the new shell&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">,
</span><span title="LineNr "class="LineNr">102</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">      </span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">103</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">104</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">105</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// update background color if necessary
</span><span title="LineNr "class="LineNr">106</span>  <span title="typescriptBlock "class="typescriptBlock">    updateBackgroundColor</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">107</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">108</span>  <span title="typescriptBlock "class="typescriptBlock">    cfg </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> cfg_;
</span><span title="LineNr "class="LineNr">109</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">110</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">111</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;init&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">112</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptPaymentMethod "class="typescriptPaymentMethod">show</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">113</span>  <span title="typescriptBlock "class="typescriptBlock">    updateBackgroundColor</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">114</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">115</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// If no callback is passed to createWindow,
</span><span title="LineNr "class="LineNr">116</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// a new session will be created by default.
</span><span title="LineNr "class="LineNr">117</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptUnaryOp "class="typescriptUnaryOp">!</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">fn</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">118</span>  <span title="typescriptBlock "class="typescriptBlock">      fn </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">win</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptTypeReference "class="typescriptTypeReference">BrowserWindow</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptBlock "class="typescriptBlock"> win</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;termgroup add req&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">119</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">120</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">121</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// app.windowCallback is the createWindow callback
</span><span title="LineNr "class="LineNr">122</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// that can be set before the &#39;ready&#39; app event
</span><span title="LineNr "class="LineNr">123</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// and createWindow definition. It&#39;s executed in place of
</span><span title="LineNr "class="LineNr">124</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// the callback passed as parameter, and deleted right after.
</span><span title="LineNr "class="LineNr">125</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptParenExp "class="typescriptParenExp">app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptParenExp "class="typescriptParenExp">windowCallback </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">||</span><span title="typescriptParenExp "class="typescriptParenExp"> fn</span><span title="typescriptParens "class="typescriptParens">)(</span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">126</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptOperator "class="typescriptOperator">delete</span><span title="typescriptBlock "class="typescriptBlock"> app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">windowCallback;
</span><span title="LineNr "class="LineNr">127</span>  <span title="typescriptBlock "class="typescriptBlock">    fetchNotifications</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">128</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// auto updates
</span><span title="LineNr "class="LineNr">129</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptUnaryOp "class="typescriptUnaryOp">!</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">isDev</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">130</span>  <span title="typescriptBlock "class="typescriptBlock">      updater</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">131</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptConditional "class="typescriptConditional">else</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">132</span>  <span title="typescriptBlock "class="typescriptBlock">      </span><span title="typescriptGlobal "class="typescriptGlobal">console</span><span title="typescriptBlock "class="typescriptBlock">.log</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;ignoring auto updates during dev&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">133</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">134</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">135</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">136</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptFuncKeyword "class="typescriptFuncKeyword">function</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptFuncName "class="typescriptFuncName">createSession</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">extraOptions</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptPredefinedType "class="typescriptPredefinedType">any</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptDefaultParam "class="typescriptDefaultParam">&#61;</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptBraces "class="typescriptBraces">{}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">137</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">uid</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> uuidv4</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">138</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">extraOptionsFiltered</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptPredefinedType "class="typescriptPredefinedType">any</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{}</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">139</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptGlobal "class="typescriptGlobal">Object</span><span title="typescriptGlobalObjectDot "class="typescriptGlobalObjectDot">.</span><span title="typescriptObjectStaticMethod "class="typescriptObjectStaticMethod">keys</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">extraOptions</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptES6SetMethod "class="typescriptES6SetMethod">forEach</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg">key</span><span title="typescriptArrowFuncDef "class="typescriptArrowFuncDef"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">140</span>  <span title="typescriptBlock "class="typescriptBlock">      </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">extraOptions</span><span title="typescriptProperty "class="typescriptProperty">[</span><span title="typescriptIndexExpr "class="typescriptIndexExpr">key</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">] </span><span title="typescriptUnaryOp "class="typescriptUnaryOp">!</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">&#61;&#61; </span><span title="typescriptNull "class="typescriptNull">undefined</span><span title="typescriptParens "class="typescriptParens">)
</span><span title="LineNr "class="LineNr">141</span>  <span title="typescriptBlock "class="typescriptBlock">        extraOptionsFiltered</span><span title="typescriptProperty "class="typescriptProperty">[</span><span title="typescriptIndexExpr "class="typescriptIndexExpr">key</span><span title="typescriptBlock "class="typescriptBlock">] </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> extraOptions</span><span title="typescriptProperty "class="typescriptProperty">[</span><span title="typescriptIndexExpr "class="typescriptIndexExpr">key</span><span title="typescriptBlock "class="typescriptBlock">];
</span><span title="LineNr "class="LineNr">142</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">143</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">144</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// remove the rows and cols, the wrong value of them will break layout when init create
</span><span title="LineNr "class="LineNr">145</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">defaultOptions</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptGlobal "class="typescriptGlobal">Object</span><span title="typescriptGlobalObjectDot "class="typescriptGlobalObjectDot">.</span><span title="typescriptBOMLocationMethod "class="typescriptBOMLocationMethod">assign</span><span title="typescriptParens "class="typescriptParens">(
</span><span title="LineNr "class="LineNr">146</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">      </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">147</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">        </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">cwd</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> workingDirectory,
</span><span title="LineNr "class="LineNr">148</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">        </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">splitDirection</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptNull "class="typescriptNull">undefined</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">149</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">        </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">shell</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">shell,
</span><span title="LineNr "class="LineNr">150</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">        </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">shellArgs</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">shellArgs </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&amp;&amp;</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptGlobal "class="typescriptGlobal">Array</span><span title="typescriptGlobalArrayDot "class="typescriptGlobalArrayDot">.</span><span title="typescriptArrayStaticMethod "class="typescriptArrayStaticMethod">from</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">cfg</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">shellArgs</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">151</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">,
</span><span title="LineNr "class="LineNr">152</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">      extraOptionsFiltered,
</span><span title="LineNr "class="LineNr">153</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">      </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">uid </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">,
</span><span title="LineNr "class="LineNr">154</span>  <span title="typescriptFuncCallArg "class="typescriptFuncCallArg">    </span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">155</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">options</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> decorateSessionOptions</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">defaultOptions</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">156</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">DecoratedSession</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> decorateSessionClass</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">Session</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">157</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">session</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptOperator "class="typescriptOperator">new</span><span title="typescriptBlock "class="typescriptBlock"> DecoratedSession</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">options</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">158</span>  <span title="typescriptBlock "class="typescriptBlock">    sessions</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptHeadersMethod "class="typescriptHeadersMethod">set</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">uid, session</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">159</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptStatementKeyword "class="typescriptStatementKeyword">return</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">session</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">, </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">options </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">160</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">161</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">162</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;new&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg">extraOptions</span><span title="typescriptArrowFuncDef "class="typescriptArrowFuncDef"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">163</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> session, options </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> createSession</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">extraOptions</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">164</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">165</span>  <span title="typescriptBlock "class="typescriptBlock">    sessions</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptHeadersMethod "class="typescriptHeadersMethod">set</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">uid, session</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">166</span>  <span title="typescriptBlock "class="typescriptBlock">    rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;session add&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">167</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">rows</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">rows,
</span><span title="LineNr "class="LineNr">168</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">cols</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">cols,
</span><span title="LineNr "class="LineNr">169</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">uid</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">uid,
</span><span title="LineNr "class="LineNr">170</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">splitDirection</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">splitDirection,
</span><span title="LineNr "class="LineNr">171</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">shell</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">shell,
</span><span title="LineNr "class="LineNr">172</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">pid</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">pty </span><span title="typescriptTernaryOp "class="typescriptTernaryOp">?</span><span title="typescriptTernary "class="typescriptTernary"> session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptTernary "class="typescriptTernary">pty</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptTernary "class="typescriptTernary">pid </span><span title="typescriptTernaryOp "class="typescriptTernaryOp">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptNull "class="typescriptNull">null</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">173</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">activeUid</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">activeUid,
</span><span title="LineNr "class="LineNr">174</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">175</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">176</span>  <span title="typescriptBlock "class="typescriptBlock">    session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;data&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">data</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptPredefinedType "class="typescriptPredefinedType">string</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">177</span>  <span title="typescriptBlock "class="typescriptBlock">      rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;session data&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, data</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">178</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">179</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">180</span>  <span title="typescriptBlock "class="typescriptBlock">    session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;exit&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">181</span>  <span title="typescriptBlock "class="typescriptBlock">      rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;session exit&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">uid</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">uid </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">182</span>  <span title="typescriptBlock "class="typescriptBlock">      unsetRendererType</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">uid</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">183</span>  <span title="typescriptBlock "class="typescriptBlock">      sessions</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptCacheMethod "class="typescriptCacheMethod">delete</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">options</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">uid</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">184</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">185</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">186</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">187</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;exit&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">{ uid }</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">188</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">session</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> sessions</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptHeadersMethod "class="typescriptHeadersMethod">get</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">uid</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">189</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">session</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">190</span>  <span title="typescriptBlock "class="typescriptBlock">      session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">exit</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">191</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">192</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">193</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;unmaximize&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">194</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">unmaximize</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">195</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">196</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;maximize&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">197</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBOMWindowMethod "class="typescriptBOMWindowMethod">maximize</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">198</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">199</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;minimize&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">200</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">minimize</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">201</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">202</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;resize&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">{ uid</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> cols</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> rows }</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">203</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">session</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> sessions</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptHeadersMethod "class="typescriptHeadersMethod">get</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">uid</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">204</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">session</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">205</span>  <span title="typescriptBlock "class="typescriptBlock">      session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">resize</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">cols</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">, </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">rows </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">206</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">207</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">208</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;data&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">{ uid</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> data</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> escaped }</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">209</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">session</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> sessions</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptHeadersMethod "class="typescriptHeadersMethod">get</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">uid</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">210</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">session</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">211</span>  <span title="typescriptBlock "class="typescriptBlock">      </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">escaped</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">212</span>  <span title="typescriptBlock "class="typescriptBlock">        </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">escapedData</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">shell</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptStringMethod "class="typescriptStringMethod">endsWith</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;cmd.exe&#39;</span><span title="typescriptParens "class="typescriptParens">)
</span><span title="LineNr "class="LineNr">213</span>  <span title="typescriptBlock "class="typescriptBlock">          </span><span title="typescriptTernaryOp "class="typescriptTernaryOp">?</span><span title="typescriptTernary "class="typescriptTernary"> </span><span title="typescriptTemplate "class="typescriptTemplate">`&quot;</span><span title="typescriptTemplateSB "class="typescriptTemplateSB">${</span><span title="typescriptTemplateSubstitution "class="typescriptTemplateSubstitution">data</span><span title="typescriptTemplateSB "class="typescriptTemplateSB">}</span><span title="typescriptTemplate "class="typescriptTemplate">&quot;`</span><span title="typescriptTernary "class="typescriptTernary"> </span><span title="typescriptLineComment "class="typescriptLineComment">// This is how cmd.exe does it
</span><span title="LineNr "class="LineNr">214</span>  <span title="typescriptTernary "class="typescriptTernary">          </span><span title="typescriptTernaryOp "class="typescriptTernaryOp">:</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptTemplate "class="typescriptTemplate">`&#39;</span><span title="typescriptTemplateSB "class="typescriptTemplateSB">${</span><span title="typescriptTemplateSubstitution "class="typescriptTemplateSubstitution">data</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBOMLocationMethod "class="typescriptBOMLocationMethod">replace</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptRegexpString "class="typescriptRegexpString">/&#39;/g</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptTemplate "class="typescriptTemplate">`&#39;\\&#39;&#39;`</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptTemplateSB "class="typescriptTemplateSB">}</span><span title="typescriptTemplate "class="typescriptTemplate">&#39;`</span><span title="typescriptBlock "class="typescriptBlock">; 
</span><span title="LineNr "class="LineNr">215</span>  <span title="typescriptBlock "class="typescriptBlock">          </span><span title="typescriptLineComment "class="typescriptLineComment">// Inside a single-quoted string nothing is interpreted
</span><span title="LineNr "class="LineNr">216</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">217</span>  <span title="typescriptBlock "class="typescriptBlock">        session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocMethod "class="typescriptDOMDocMethod">write</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">escapedData</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">218</span>  <span title="typescriptBlock "class="typescriptBlock">      </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptConditional "class="typescriptConditional">else</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">219</span>  <span title="typescriptBlock "class="typescriptBlock">        session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocMethod "class="typescriptDOMDocMethod">write</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">data</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">220</span>  <span title="typescriptBlock "class="typescriptBlock">      </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">221</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">222</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">223</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;info renderer&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">{ uid</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> type }</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">224</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptLineComment "class="typescriptLineComment">// Used in the &quot;About&quot; dialog
</span><span title="LineNr "class="LineNr">225</span>  <span title="typescriptBlock "class="typescriptBlock">    setRendererType</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">uid, type</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">226</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">227</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;open external&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">{ url }</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">228</span>  <span title="typescriptBlock "class="typescriptBlock">    shell</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">openExternal</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">url</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">229</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">230</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;open context menu&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg">selection</span><span title="typescriptArrowFuncDef "class="typescriptArrowFuncDef"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">231</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> createWindow </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> app;
</span><span title="LineNr "class="LineNr">232</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptBlock "class="typescriptBlock"> buildFromTemplate </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> Menu;
</span><span title="LineNr "class="LineNr">233</span>  <span title="typescriptBlock "class="typescriptBlock">    buildFromTemplate</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">contextMenuTemplate</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">createWindow, selection</span><span title="typescriptParens "class="typescriptParens">))</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">popup</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">234</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">      </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">window</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">,
</span><span title="LineNr "class="LineNr">235</span>  <span title="typescriptObjectLiteral "class="typescriptObjectLiteral">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">236</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">237</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;open hamburger menu&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">{ x</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> y }</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">238</span>  <span title="typescriptBlock "class="typescriptBlock">    Menu</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">getApplicationMenu</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptUnaryOp "class="typescriptUnaryOp">!</span><span title="typescriptBlock "class="typescriptBlock">.popup</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">x</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptGlobal "class="typescriptGlobal">Math</span><span title="typescriptGlobalMathDot "class="typescriptGlobalMathDot">.</span><span title="typescriptMathStaticMethod "class="typescriptMathStaticMethod">ceil</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">x</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">, </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">y</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptGlobal "class="typescriptGlobal">Math</span><span title="typescriptGlobalMathDot "class="typescriptGlobalMathDot">.</span><span title="typescriptMathStaticMethod "class="typescriptMathStaticMethod">ceil</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">y</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">239</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">240</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// Same deal as above, grabbing the window titlebar when the window
</span><span title="LineNr "class="LineNr">241</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// is maximized on Windows results in unmaximize, without hitting any
</span><span title="LineNr "class="LineNr">242</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// app buttons
</span><span title="LineNr "class="LineNr">243</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptRepeat "class="typescriptRepeat">for</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptLoopParen "class="typescriptLoopParen"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">ev</span><span title="typescriptLoopParen "class="typescriptLoopParen"> </span><span title="typescriptForOperator "class="typescriptForOperator">of</span><span title="typescriptLoopParen "class="typescriptLoopParen"> </span><span title="typescriptBraces "class="typescriptBraces">[</span><span title="typescriptString "class="typescriptString">&#39;maximize&#39;</span><span title="typescriptArray "class="typescriptArray">, </span><span title="typescriptString "class="typescriptString">&#39;unmaximize&#39;</span><span title="typescriptArray "class="typescriptArray">, </span><span title="typescriptString "class="typescriptString">&#39;minimize&#39;</span><span title="typescriptArray "class="typescriptArray">, </span><span title="typescriptString "class="typescriptString">&#39;restore&#39;</span><span title="typescriptBraces "class="typescriptBraces">]</span><span title="typescriptLoopParen "class="typescriptLoopParen"> </span><span title="typescriptCastKeyword "class="typescriptCastKeyword">as</span><span title="typescriptLoopParen "class="typescriptLoopParen"> </span><span title="typescriptPredefinedType "class="typescriptPredefinedType">any</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">244</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">ev, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;windowGeometry change&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{}</span><span title="typescriptParens "class="typescriptParens">))</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">245</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">246</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;move&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">247</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">position</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">getPosition</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">248</span>  <span title="typescriptBlock "class="typescriptBlock">    rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;move&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">bounds</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">x</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> position</span><span title="typescriptProperty "class="typescriptProperty">[</span><span title="typescriptNumber "class="typescriptNumber">0</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">], </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">y</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> position</span><span title="typescriptProperty "class="typescriptProperty">[</span><span title="typescriptNumber "class="typescriptNumber">1</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral">] </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">249</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">250</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;close&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">251</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocMethod "class="typescriptDOMDocMethod">close</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">252</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">253</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;command&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg">command</span><span title="typescriptArrowFuncDef "class="typescriptArrowFuncDef"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">254</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">focusedWindow</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> BrowserWindow</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">getFocusedWindow</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">255</span>  <span title="typescriptBlock "class="typescriptBlock">    execCommand</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">command, focusedWindow</span><span title="typescriptUnaryOp "class="typescriptUnaryOp">!</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">256</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">257</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// pass on the full screen events from the window to react
</span><span title="LineNr "class="LineNr">258</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">win</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;enter-full-screen&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">259</span>  <span title="typescriptBlock "class="typescriptBlock">    rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;enter full screen&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">260</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">261</span>  <span title="typescriptBlock "class="typescriptBlock">  rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">win</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;leave-full-screen&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">262</span>  <span title="typescriptBlock "class="typescriptBlock">    rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;leave full screen&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">263</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">264</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">deleteSessions</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">265</span>  <span title="typescriptBlock "class="typescriptBlock">    sessions</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptES6SetMethod "class="typescriptES6SetMethod">forEach</span><span title="typescriptParens "class="typescriptParens">((</span><span title="typescriptCall "class="typescriptCall">session</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> key</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">266</span>  <span title="typescriptBlock "class="typescriptBlock">      session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">removeAllListeners</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">267</span>  <span title="typescriptBlock "class="typescriptBlock">      session</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">destroy</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">268</span>  <span title="typescriptBlock "class="typescriptBlock">      sessions</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptCacheMethod "class="typescriptCacheMethod">delete</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">key</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">269</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">270</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">271</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// we reset the rpc channel only upon
</span><span title="LineNr "class="LineNr">272</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// subsequent refreshes (ie: F5)
</span><span title="LineNr "class="LineNr">273</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">let</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">i</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptNumber "class="typescriptNumber">0</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">274</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">webContents</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;did-navigate&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">275</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">i</span><span title="typescriptBinaryOp "class="typescriptBinaryOp">++</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">276</span>  <span title="typescriptBlock "class="typescriptBlock">      deleteSessions</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">277</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">278</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">279</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">280</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// If file is dropped onto the terminal window, navigate event is prevented
</span><span title="LineNr "class="LineNr">281</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// and his path is added to active session.
</span><span title="LineNr "class="LineNr">282</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">webContents</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;will-navigate&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">event</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> url</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">283</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">protocol</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptOperator "class="typescriptOperator">typeof</span><span title="typescriptBlock "class="typescriptBlock"> url </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptString "class="typescriptString">&#39;string&#39;</span><span title="typescriptBlock "class="typescriptBlock"> &amp;&amp; parseUrl</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">url</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptURLUtilsProp "class="typescriptURLUtilsProp">protocol</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">284</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">protocol </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptString "class="typescriptString">&#39;file:&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">285</span>  <span title="typescriptBlock "class="typescriptBlock">      event</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMEventMethod "class="typescriptDOMEventMethod">preventDefault</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">286</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">287</span>  <span title="typescriptBlock "class="typescriptBlock">      </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">path</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> fileUriToPath</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">url</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">288</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">289</span>  <span title="typescriptBlock "class="typescriptBlock">      rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;session data send&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">data</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> path, </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">escaped</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBoolean "class="typescriptBoolean">true</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">290</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptConditional "class="typescriptConditional">else</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">protocol </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptString "class="typescriptString">&#39;http:&#39;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> || protocol </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptString "class="typescriptString">&#39;https:&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">291</span>  <span title="typescriptBlock "class="typescriptBlock">      event</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMEventMethod "class="typescriptDOMEventMethod">preventDefault</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">292</span>  <span title="typescriptBlock "class="typescriptBlock">      rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">emit</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;session data send&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptBraces "class="typescriptBraces">{</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> </span><span title="typescriptObjectLabel "class="typescriptObjectLabel">data</span><span title="typescriptObjectColon "class="typescriptObjectColon">:</span><span title="typescriptObjectLiteral "class="typescriptObjectLiteral"> url </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">293</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">294</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">295</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">296</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// xterm makes link clickable
</span><span title="LineNr "class="LineNr">297</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">webContents</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;new-window&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptCall "class="typescriptCall">event</span><span title="typescriptFuncComma "class="typescriptFuncComma">,</span><span title="typescriptCall "class="typescriptCall"> url</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">298</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">protocol</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptOperator "class="typescriptOperator">typeof</span><span title="typescriptBlock "class="typescriptBlock"> url </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptString "class="typescriptString">&#39;string&#39;</span><span title="typescriptBlock "class="typescriptBlock"> &amp;&amp; parseUrl</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">url</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptURLUtilsProp "class="typescriptURLUtilsProp">protocol</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">299</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">protocol </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptString "class="typescriptString">&#39;http:&#39;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> || protocol </span><span title="typescriptBinaryOp "class="typescriptBinaryOp">&#61;&#61;&#61;</span><span title="typescriptConditionalParen "class="typescriptConditionalParen"> </span><span title="typescriptString "class="typescriptString">&#39;https:&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">300</span>  <span title="typescriptBlock "class="typescriptBlock">      event</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMEventMethod "class="typescriptDOMEventMethod">preventDefault</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">301</span>  <span title="typescriptBlock "class="typescriptBlock">      shell</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">openExternal</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">url</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">302</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">303</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">304</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">305</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// expose internals to extension authors
</span><span title="LineNr "class="LineNr">306</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">rpc </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> rpc;
</span><span title="LineNr "class="LineNr">307</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">sessions </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> sessions;
</span><span title="LineNr "class="LineNr">308</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">309</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">load</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">310</span>  <span title="typescriptBlock "class="typescriptBlock">    app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocProp "class="typescriptDOMDocProp">plugins</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">onWindow</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">311</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">312</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">313</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// load plugins
</span><span title="LineNr "class="LineNr">314</span>  <span title="typescriptBlock "class="typescriptBlock">  load</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">315</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">316</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">pluginsUnsubscribe</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptDOMDocProp "class="typescriptDOMDocProp">plugins</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">subscribe</span><span title="typescriptParens "class="typescriptParens">((</span><span title="typescriptCall "class="typescriptCall">err</span><span title="typescriptTypeAnnotation "class="typescriptTypeAnnotation">:</span><span title="typescriptCall "class="typescriptCall"> </span><span title="typescriptPredefinedType "class="typescriptPredefinedType">any</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">317</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptConditional "class="typescriptConditional">if</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptUnaryOp "class="typescriptUnaryOp">!</span><span title="typescriptConditionalParen "class="typescriptConditionalParen">err</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">318</span>  <span title="typescriptBlock "class="typescriptBlock">      load</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">319</span>  <span title="typescriptBlock "class="typescriptBlock">      </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">webContents</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptXHRMethod "class="typescriptXHRMethod">send</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;plugins change&#39;</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">320</span>  <span title="typescriptBlock "class="typescriptBlock">      updateBackgroundColor</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">321</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBraces "class="typescriptBraces">}
</span><span title="LineNr "class="LineNr">322</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">323</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">324</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// Keep track of focus time of every window, to figure out
</span><span title="LineNr "class="LineNr">325</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// which one of the existing window is the last focused.
</span><span title="LineNr "class="LineNr">326</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// Works nicely even if a window is closed and removed.
</span><span title="LineNr "class="LineNr">327</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptVariable "class="typescriptVariable">const</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptVariableDeclaration "class="typescriptVariableDeclaration">updateFocusTime</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">328</span>  <span title="typescriptBlock "class="typescriptBlock">    </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">focusTime </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptNodeGlobal "class="typescriptNodeGlobal">process</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">uptime</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">329</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">330</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">331</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">on</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptString "class="typescriptString">&#39;focus&#39;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg">, </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptFuncCallArg "class="typescriptFuncCallArg"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">332</span>  <span title="typescriptBlock "class="typescriptBlock">    updateFocusTime</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">333</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">334</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">335</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// the window can be closed by the browser process itself
</span><span title="LineNr "class="LineNr">336</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">clean </span><span title="typescriptAssign "class="typescriptAssign">&#61;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptArrowFuncArg "class="typescriptArrowFuncArg"> </span><span title="typescriptArrowFunc "class="typescriptArrowFunc">&#61;&gt;</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBraces "class="typescriptBraces">{
</span><span title="LineNr "class="LineNr">337</span>  <span title="typescriptBlock "class="typescriptBlock">    app</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">config</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">winRecord</span><span title="typescriptParens "class="typescriptParens">(</span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptParens "class="typescriptParens">)</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">338</span>  <span title="typescriptBlock "class="typescriptBlock">    rpc</span><span title="typescriptDotNotation "class="typescriptDotNotation">.</span><span title="typescriptBlock "class="typescriptBlock">destroy</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">339</span>  <span title="typescriptBlock "class="typescriptBlock">    deleteSessions</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">340</span>  <span title="typescriptBlock "class="typescriptBlock">    cfgUnsubscribe</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">341</span>  <span title="typescriptBlock "class="typescriptBlock">    pluginsUnsubscribe</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">342</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptBraces "class="typescriptBraces">}</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">343</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// Ensure focusTime is set on window open. The focus event doesn&#39;t
</span><span title="LineNr "class="LineNr">344</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptLineComment "class="typescriptLineComment">// fire from the dock (see bug #583)
</span><span title="LineNr "class="LineNr">345</span>  <span title="typescriptBlock "class="typescriptBlock">  updateFocusTime</span><span title="typescriptParens "class="typescriptParens">()</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr">346</span>  <span title="Normal "class="Normal">
</span><span title="LineNr "class="LineNr">347</span>  <span title="typescriptBlock "class="typescriptBlock">  </span><span title="typescriptStatementKeyword "class="typescriptStatementKeyword">return</span><span title="typescriptBlock "class="typescriptBlock"> </span><span title="typescriptBOMWindowProp "class="typescriptBOMWindowProp">window</span><span title="typescriptBlock "class="typescriptBlock">;
</span><span title="LineNr "class="LineNr last-LineNr">348</span>  <span title="typescriptBraces "class="typescriptBraces">}</span>